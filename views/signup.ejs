<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" type="text/css" href="../public/css/mainStyle.css">
        <link rel="stylesheet" type="text/css" href="../public/css/signup.css">
        <title>집순집돌</title>
    </head>
    <body>
        <div id="register">
            <div id="title"><p>아지트 초대권</p></div>
            <div id="registerBox">
                <div id="beforeReg">
                    <img id="logo" src="../public/img/logo.png">
                    <% if(message.length>0){ %>
                        <div id='alert-danger'><%= message %></div>
                    <% } %>
                    <form method="post" action="/signup" id="signupform" onsubmit="return welcome(document.getElementById('signupform'));">
                        <div class="formBox"><p>닉네임&nbsp;</p><input type="text" maxlength="20" name="name"></div>
                        <div class="formBox"><p>메일주소&nbsp;</p><input type="email" maxlength="20" name="email"></div>
                        <div class="formBox"><p>비밀번호&nbsp;</p><input type="password" maxlength="20" name="password"></div>
                        <div class="formBox"><p>비밀번호 확인&nbsp;</p><input type="password" maxlength="20" name="passwordCheck"></div>
                        <div class="formBox"><input type="submit" name="register" value="회원가입"></div>
                    </form>
                </div>
                <div id="afterReg">
                    <p><sapn id="forname"></sapn>님, 환영합니다!</p><p>(5초 뒤 메인 페이지로 이동합니다)</p>
                </div>
                <img id="stamp" src="../public/img/logo.png">
            </div>
        </div>
        
        <script>
            function welcome(form){
                var exp=/^([a-zA-Z0-9_.-])+@([a-zA-Z0-9_.-])+\.([a-zA-Z])+([a-zA-Z])+/;
                if(form["name"].value.length==0){
                    alert("이름을 입력해주세요");
                    return false;
                }
                if(form["email"].value.length==0){
                    alert("이메일을 입력해주세요");
                    return false;
                }
                if(form["password"].value.length==0||form['passwordCheck'].value.length==0){
                    alert("비밀번호를 입력해주세요");
                    return false;
                }
                
                if(!form["email"].value.match(exp)){
                    alert("이메일 형식이 올바르지 않습니다");
                    return false;
                }
                if(form["password"].value!=form["passwordCheck"].value){
                    alert("비밀번호가 일치하지 않습니다");
                    form["passwordCheck"].value='';
                    return false;
                }
                var name=form["name"].value;
                document.getElementById("forname").innerHTML=name;
                document.getElementById("afterReg").style.visibility="visible";
                document.getElementById("stamp").style.visibility="visible";
                return true;
            }
        </script>
    </body>
</html>